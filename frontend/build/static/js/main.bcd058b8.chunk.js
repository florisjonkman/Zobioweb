(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{278:function(e,t){},411:function(e,t,a){e.exports=a.p+"static/media/ZobioLogo.41100ac4.svg"},413:function(e,t,a){e.exports=a.p+"static/media/FridgeIn2.22ff45d4.svg"},414:function(e,t,a){e.exports=a.p+"static/media/FridgeOut2.fc1742cc.svg"},421:function(e,t,a){e.exports=a.p+"static/media/ZobioLogo_Flat.c938947b.svg"},433:function(e,t,a){e.exports=a(561)},561:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),s=a(303),l=a(13),i=a(425),u=a(108),m=a(410),d=a(138),p=a(603),g=r.a.createContext(),b=a(32),f=a.n(b),h=a(56),E=a(20),v=a.n(E),j=a(122),O=a.n(j),y=a(182),k=a.n(y),C=a(366),S=a(370),x=a(589),R=a(368),D=a(369),w=a(405),N=a(367),T=a(588),P=a(411),F=a.n(P),L=Object(C.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var B=function(e){var t=L(),a=r.a.useContext(g),o=Object(n.useState)(""),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(""),m=Object(l.a)(u,2),d=m[0],p=m[1],b=Object(n.useState)(!1),E=Object(l.a)(b,2),j=E[0],y=E[1],C=Object(n.useState)(!1),P=Object(l.a)(C,2),B=P[0],A=P[1],I=Object(n.useState)(!1),_=Object(l.a)(I,2),q=_[0],K=_[1],G=function(e){var t=e.target,a=t.value,n=t.name;"username"===n&&i(a),"password"===n&&p(a),"remember"===n&&y(!j)},H=function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching checking ldap account..."),K(!0),t=k.a.pki.publicKeyFromPem("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDA/MD2URSiNjkpSA3r7GritU0b\nfXC27iof34O1Lo1TFJrJVK+Z+vJqQXc3zdnXY/oclLNWlwqXqZlc1HqCOqzailAf\nI0eJXxxehGLW1dMOygi8yExGR3cwqZIAkGk2tUaw4BdRAOhFIcGapZ1mBLtrorZI\n/Cb6QpRGKiERlPrk7QIDAQAB\n-----END PUBLIC KEY-----"),a=t.encrypt(d,"RSA-OAEP",{md:k.a.md.sha256.create(),mgf1:k.a.mgf1.create()}),n=k.a.util.encode64(a),e.next=7,O()({url:"http://localhost:5000/login",method:"post",auth:{username:s,password:n}});case 7:return r=e.sent,K(!1),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,q&&r.a.createElement(N.a,null),r.a.createElement(T.a,{component:"main",maxWidth:"xs"},r.a.createElement(x.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement("img",{src:F.a,width:200}),r.a.createElement("form",{className:t.form},r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:B,value:s,id:"username",name:"username",label:"Username",autoComplete:"username",autoFocus:!0,onChange:G}),r.a.createElement(R.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:B,value:d,id:"password",name:"password",label:"Password",type:"password",autoComplete:"current-password",onChange:G}),r.a.createElement(D.a,{control:r.a.createElement(w.a,{id:"remember",name:"remember",value:"remember",color:"primary",checked:j,onChange:G}),label:"Remember me"}),r.a.createElement(S.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault();var n=e.history;H().then((function(e){console.log(e),200==e.status&&"OK"==e.statusText?(console.log(e.data.message),a.setAuth(!0),v.a.set("username",e.data.output.userData.username,{expires:1}),v.a.set("fullname",e.data.output.userData.cn,{expires:1}),v.a.set("authentication",!0,{expires:1}),v.a.set("token",e.data.output.token,{expires:1}),v.a.set("remember",j,{expires:1}),n.push("/dashboard")):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e))})).catch((function(e){A(!0),e.response?console.error("ERROR fetchCheckLDAP(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),K(!1)}))}},"Sign In")))))},A=a(43),I=a(151),_=a(2),q=a(604),K=a(377),G=a(44),H=a(293),z=a(596),V=a(606),W=a(597),Y=a(605),J=a(598),M=a(423),Q=a.n(M),U=a(422),Z=a.n(U),X=a(424),$=a.n(X),ee=a(75),te=a(569),ae=a(590),ne=a(572),re=a(591),oe=a(371),ce=a(281),se=a(614),le=Object(C.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(I.a)(Object(I.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),buttonSignOut:{display:"flex",justifyContent:"center",marginBottom:10}}}));var ie=function(e){var t=e.open,a=le(),n=v.a.get("fullname");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{className:a.drawer,variant:"persistent",anchor:"right",open:t,classes:{paper:a.drawerPaper}},r.a.createElement(ae.a,null),r.a.createElement(ce.a,{flexGrow:1},r.a.createElement(te.a,null,r.a.createElement(ne.a,null,r.a.createElement(oe.a,{secondary:"Account"})),r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(se.a,{"aria-label":"recipe",component:"a"},n?n.charAt(0).toUpperCase():"")),r.a.createElement(oe.a,{primary:n})))),r.a.createElement(te.a,null,r.a.createElement("div",{className:a.buttonSignOut},r.a.createElement(S.a,{variant:"contained",color:"secondary",onClick:function(){v.a.remove("username"),v.a.remove("fullname"),v.a.remove("authentication"),v.a.remove("remember"),v.a.remove("token")},href:"/"},"Sign out")))))},ue=a(592),me=a(593),de=a(595),pe=a(594),ge=a(415),be=a.n(ge),fe=a(236),he=a.n(fe),Ee=a(413),ve=a.n(Ee),je=a(414),Oe=a.n(je),ye=Object(C.a)((function(e){return{buttons:{margin:10},avatarAdd:{backgroundColor:e.palette.success.main},avatarCheck:{backgroundColor:e.palette.warning.main},avatarDelete:{backgroundColor:e.palette.error.main}}}));var ke=function(e){var t=e.handleChangePage,a=ye();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:a.buttons},r.a.createElement(me.a,null,r.a.createElement(pe.a,{onClick:function(){t("Add")},underline:"none",color:"textPrimary"},r.a.createElement(de.a,{avatar:r.a.createElement(se.a,{"aria-label":"recipe",className:a.avatarAdd},r.a.createElement(he.a,{fontSize:"large"})),title:"Add",subheader:"Scan new vials and add them to a project"})))),r.a.createElement(ue.a,{className:a.buttons},r.a.createElement(me.a,null,r.a.createElement(pe.a,{onClick:function(){t("Check-out")},underline:"none",color:"textPrimary"},r.a.createElement(de.a,{avatar:r.a.createElement(se.a,{"aria-label":"recipe",className:a.avatarCheck},r.a.createElement("img",{src:Oe.a,width:22})),title:"Check-out",subheader:"Scan vials and use them in the lab"})))),r.a.createElement(ue.a,{className:a.buttons},r.a.createElement(me.a,null,r.a.createElement(pe.a,{onClick:function(){t("Check-in")},underline:"none",color:"textPrimary"},r.a.createElement(de.a,{avatar:r.a.createElement(se.a,{"aria-label":"recipe",className:a.avatarCheck},r.a.createElement("img",{src:ve.a,width:22})),title:"Check-in",subheader:"Scan unused vials and place them in the fridge"})))),r.a.createElement(ue.a,{className:a.buttons},r.a.createElement(me.a,null,r.a.createElement(pe.a,{onClick:function(){t("Delete")},underline:"none",color:"textPrimary"},r.a.createElement(de.a,{avatar:r.a.createElement(se.a,{"aria-label":"recipe",className:a.avatarDelete},r.a.createElement(be.a,{fontSize:"large"})),title:"Delete",subheader:"Scan vials and delete them from the project"})))))},Ce=a(103),Se=a(610),xe=a(608),Re=a(609),De=a(298),we=a(372),Ne=Object(C.a)((function(e){return{title:{display:"flex",justifyContent:"center",marginBottom:e.spacing(3),marginRight:e.spacing(1),marginLeft:e.spacing(1)},select:{width:200,marginRight:e.spacing(1),marginLeft:e.spacing(1)},arrange:{display:"flex",justifyContent:"center"}}}));var Te=function(e){var t=e.selectedProject,a=e.projects,n=e.onProjectChange,o=e.isLoading,c=Ne();return r.a.createElement("div",null,r.a.createElement(G.a,{variant:"h5",gutterBottom:!0,className:c.title},"Select project"),r.a.createElement("div",{className:c.arrange},o?r.a.createElement(we.a,null):r.a.createElement(De.a,{native:!0,variant:"outlined",name:"selectedproject",key:"selectedproject_select",id:"selectedproject_select",value:t.value,onChange:n,className:c.select},a.map((function(e,t){return r.a.createElement("option",{value:e.value,key:"project_"+e.name},e.name)})))))},Pe=a(237),Fe=a.n(Pe),Le=a(407),Be=Object(C.a)((function(e){return{inputLabel:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},circular:{color:e.palette.success.main,marginRight:e.spacing(1),marginLeft:e.spacing(1)},chip:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},button:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},buttons:{marginTop:e.spacing(5),display:"flex",alignItems:"center",justifyContent:"center"}}})),Ae=Object(d.a)({overrides:{MuiTableRow:{root:{"&:hover":{backgroundColor:"#f5f5f5"}}}}});var Ie=function(e){var t=e.data,a=e.selectedProject,o=e.onDataChange,c=e.onBarcodeSubmitted,s=e.isLoading,i=Be(),u=Object(n.useState)(""),m=Object(l.a)(u,2),d=m[0],g=m[1],b=function(e){e.preventDefault(),""!==d&&(c(d),g(""))};return r.a.createElement("div",null,r.a.createElement(p.a,{theme:Ae},r.a.createElement(Fe.a,{components:{Container:function(e){return r.a.createElement(Ce.a,Object.assign({},e,{elevation:0}))}},title:"Scanned vials",options:{paging:!1,search:!1,showTitle:!0,toolbar:!0},columns:[{title:"No",field:"id",editable:"never"},{title:"Vial barcode",field:"barcode",editable:"never"},{title:"Project",field:"project",editable:"never",render:function(e){return e.project.name}},{title:"Box",field:"box",editable:"never"},{title:"Position",field:"poslabel",editable:"never"},{title:"Status",field:"status",editable:"never"},{title:"Timestamp",field:"timestamp",editable:"never"}],localization:{header:{actions:""}},data:t,editable:{onRowDelete:function(e){return new Promise((function(a,n){setTimeout((function(){var n=Array.from(t),r=n.indexOf(e);n.splice(r,1),o(n),a()}),10)}))}}})),s&&r.a.createElement(N.a,null),r.a.createElement("div",{className:i.buttons},r.a.createElement(Le.a,{disabled:!0,className:i.chip,label:a.name}),r.a.createElement(R.a,{variant:"outlined",value:d,name:"barcode",key:"scanitems_barcode",id:"scanitems_barcode",label:"Barcode",className:i.inputLabel,onChange:function(e){g(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(s?g(""):b(e))},autoFocus:!0}),r.a.createElement(S.a,{name:"barcode",variant:"contained","aria-label":"add",color:"primary",className:i.button,onClick:b,disabled:s},s&&r.a.createElement(we.a,{size:35}),!s&&r.a.createElement(he.a,{fontSize:"large"}))))},_e=Object(C.a)((function(e){return{title:{display:"flex",justifyContent:"center",marginBottom:e.spacing(3),marginRight:e.spacing(1),marginLeft:e.spacing(1)},select:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},line:{display:"flex",justifyContent:"space-around",alignItems:"center"},block:{width:1e3,display:"flex"}}})),qe=function(e){return r.a.createElement(Fe.a,{components:{Container:function(e){return r.a.createElement(Ce.a,Object.assign({},e,{elevation:0}))}},title:"Response from CDD",options:{paging:!1,search:!1,showTitle:!0,toolbar:!0,exportButton:!0,exportFileName:"FailedSubmittedBarcodes",rowStyle:{height:10}},columns:[{title:"CDD ID",field:"id",editable:"never"},{title:"Vial barcode",field:"barcode",editable:"never"},{title:"CDD Status",field:"status",editable:"never"},{title:"CDD Location",field:"location",editable:"never"},{title:"CDD Response",field:"message",editable:"never",render:function(e){return e["post response"].message}},{title:"CDD Response",field:"cddResponse",editable:"never",render:function(e){return JSON.stringify(e["post response"].response)}}],data:e.data})};var Ke=function(e){var t=e.isLoading,a=e.allItemsSubmitted,n=e.failedSubmittedItems,o=_e();return r.a.createElement("div",{className:o.line},t?r.a.createElement(we.a,null):a?r.a.createElement(G.a,{variant:"h5",gutterBottom:!0,className:o.title},"Items successfully submitted to database."):r.a.createElement("div",null,r.a.createElement("div",{className:o.line},r.a.createElement(G.a,{variant:"subtitle1",color:"error"},"Not all items successfully submitted to database.")),r.a.createElement("br",null),r.a.createElement(qe,{data:n,className:o.block}),r.a.createElement("br",null),r.a.createElement("div",{className:o.line},r.a.createElement(G.a,{variant:"subtitle1"},"Please report to Stijn"))))},Ge=Object(C.a)((function(e){return{title:{display:"flex",justifyContent:"center",marginBottom:e.spacing(3),marginRight:e.spacing(1),marginLeft:e.spacing(1)},select:{width:200,marginRight:e.spacing(1),marginLeft:e.spacing(1)},arrange:{display:"flex",justifyContent:"center"}}}));var He=function(){var e=Ge(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0];return a[1],r.a.createElement("div",null,r.a.createElement(G.a,{variant:"h5",gutterBottom:!0,className:e.title},"Print Labels"),r.a.createElement("div",{className:e.arrange},o?r.a.createElement(we.a,null):r.a.createElement("div",null,r.a.createElement(G.a,{variant:"subtitle1"},"Press the print labels button and follow the instructions, when finshed 'submit' the items to CDD"))))},ze=a(612),Ve=a(611),We=a(607);var Ye=function(e){var t=e.open,a=e.data,n=e.handleSnackbar;return r.a.createElement(We.a,{open:t,autoHideDuration:1e4,onClose:n},r.a.createElement(ze.a,{severity:a.type,onClose:n},r.a.createElement(Ve.a,null,a.title),a.body))};var Je=function(e){var t=e.open,a=e.data,n=e.handleDialog,o=e.handleYesDialog;return r.a.createElement(z.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(V.a,{id:"alert-dialog-title"},a.title),a.body&&r.a.createElement(W.a,null,r.a.createElement(Y.a,{id:"alert-dialog-description"},a.body)),r.a.createElement(J.a,null,r.a.createElement(S.a,{onClick:o,color:"primary"},"Yes"),r.a.createElement(S.a,{onClick:n,color:"primary",autoFocus:!0},"No")))};function Me(){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching all projects..."),t=v.a.get("token"),e.next=4,O()({url:"http://localhost:5000/projects",method:"get",headers:{authorization:t}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching send data to CDD..."),n=v.a.get("token"),e.next=4,O()({url:"http://localhost:5000/submitdata",method:"post",headers:{authorization:n},data:{type:t,data:a}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e,t,a){return $e.apply(this,arguments)}function $e(){return($e=Object(h.a)(f.a.mark((function e(t,a,n){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching position..."),r=v.a.get("token"),e.next=4,O()({url:"http://localhost:5000/getlocation",method:"post",headers:{authorization:r},data:{type:t,project:n,barcode:a}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){return(et=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.value){e.next=2;break}return e.abrupt("return");case 2:return console.log("Fetching last position..."),a=v.a.get("token"),e.next=6,O()({url:"http://localhost:5000/getlastlocation",method:"post",headers:{authorization:a},data:t});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t){var a=!0;return e.forEach((function(e,n){if(t===e.barcode)return a=!1})),a}function at(e){var t=["Jan","Feb","Mrt","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e.getMonth()],a=""+e.getDate(),n=""+e.getFullYear(),r=""+e.getHours(),o=""+e.getMinutes();return a=a.length>1?a:"0"+a,(r=r.length>1?r:"0"+r)+":"+(o=o.length>1?o:"0"+o)+", "+a+" "+t+" "+n}function nt(e){return["A","B","C","D","E","F","G","H","I"][Math.floor(e/10)-1]+(e%10).toString()}var rt=Object(C.a)((function(e){return{appBar:{position:"relative"},layout:Object(A.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(A.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var ot=function(e){var t=e.handleChangePage,a=rt(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),E=b[0],j=b[1],O=Object(n.useState)({type:"error",title:null,body:null}),y=Object(l.a)(O,2),k=y[0],C=y[1],R=Object(n.useState)(!1),D=Object(l.a)(R,2),w=D[0],N=D[1],T=Object(n.useState)(!1),P=Object(l.a)(T,2),F=P[0],L=P[1],B=Object(n.useState)([]),A=Object(l.a)(B,2),I=A[0],_=A[1],q=Object(n.useState)([null,null]),K=Object(l.a)(q,2),H=K[0],z=K[1],V=Object(n.useState)([null,null]),W=Object(l.a)(V,2),Y=W[0],J=W[1],M=Object(n.useState)([]),Q=Object(l.a)(M,2),U=Q[0],Z=Q[1],X=Object(n.useState)([{value:0,id:0,name:""}]),$=Object(l.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(ee[0]),ne=Object(l.a)(ae,2),re=ne[0],oe=ne[1];Object(n.useEffect)((function(){p(!0),Me().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=ee.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),te(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]),Object(n.useEffect)((function(){0!==re.value&&(p(!0),function(e){return et.apply(this,arguments)}(re).then((function(e){if(console.log(e),e&&200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=e.data.output["last location"].slice(1,3),a=Object(l.a)(t,2),n=a[0],r=a[1];J([n,r]),z([n,r])}p(!1)})).catch((function(e){e.response?console.error("ERROR fetchLastPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)})))}),[re]);var ce=function(e){oe(ee[e.target.value]),Z([]),j(!1)},se=function(e){var t,a;e.forEach((function(n,r){e[r].id=r+1,t=e[r].box,a=function(e){var t=e.substring(0,1),a=parseInt(e.substring(1,2));return 10*(["A","B","C","D","E","F","G","H","I"].indexOf(t)+1)+a}(e[r].poslabel)}));var n=H[0],r=H[1];a||t?t===n&&a===r||(z([t,a]),console.log("Latest position NOT the same as lastLocation","box: ".concat(n," -> ").concat(t,", pos: ").concat(r," -> ").concat(a))):z(Y),Z(e)},le=function(e){if(j(!1),!tt(U,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void j(!0);p(!0),Xe("Add",e,re).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void j(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void j(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Only vials with status 'Registered' can be added.")}),p(!1),void j(!0);var a=U.length+1,n=re,o=function(e,t){var a=1,n=11;return e||t?(t>=99?(a=e+1,n=11):t%10===9?(a=e,n=t+2):(a=e,n=t+1),[a,n]):[a,n]}(H[0],H[1]),c=Object(l.a)(o,2),s=c[0],i=c[1],u=nt(i),m=t.data.output.vialData.Status,d=at(new Date(Date.now())),g=v.a.get("username"),b=v.a.get("fullname"),f=U;f.push({id:a,barcode:e,project:n,box:s,poslabel:u,status:m,timestamp:d,username:g,fullname:b}),Z(f),z([s,i]),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," to ",r.a.createElement("strong",null,s+"-"+u))}),j(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},ie=function(){0===s&&0===re.value?(C({type:"error",title:"Error",body:"No project selected."}),j(!0)):1===s&&0===U.length?(C({type:"error",title:"Error",body:"No items scanned."}),j(!0)):i(s+1)},ue=function(){i(s-1)},me=function(){console.log("Add: handlePrint: printing data"),console.log(U)},de=function(){N(!w)},pe=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(),N(!1),p(!0),Ue("Add",U).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?L(!0):(L(!1),_(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Ce.a,{className:a.paper},r.a.createElement(G.a,{component:"h1",variant:"h4",align:"center"},"Add"),r.a.createElement(Se.a,{activeStep:s,className:a.stepper},["Select project","Scan items","Print Labels"].map((function(e){return r.a.createElement(xe.a,{key:e},r.a.createElement(Re.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Te,{selectedProject:re,projects:ee,onProjectChange:ce,isLoading:d});case 1:return r.a.createElement(Ie,{data:U,selectedProject:re,onDataChange:se,onBarcodeSubmitted:le,isLoading:d});case 2:return r.a.createElement(He,null);case 3:return r.a.createElement(Ke,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:I});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&3!==e&&n.push(r.a.createElement(S.a,{key:"button_back",name:"button_back",onClick:ue,className:a.button},"Back")),2===e&&(n.push(r.a.createElement(S.a,{key:"button_printlabel",name:"button_printlabel",onClick:me,variant:"contained",color:"secondary",className:a.button},"Print Labels")),n.push(r.a.createElement(S.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:de,className:a.button},"Submit"))),0!==e&&1!==e||n.push(r.a.createElement(S.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:ie,className:a.button},"Next")),3===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(Ye,{open:E,data:k,handleSnackbar:function(){j(!E)}}),r.a.createElement(Je,{open:w,data:{title:"Are you sure you want to submit the scanned items to CDD?",body:"The labels must be printed before submitting to CDD."},handleDialog:de,handleYesDialog:pe}))))))},ct=Object(C.a)((function(e){return{appBar:{position:"relative"},layout:Object(A.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(A.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var st=function(e){var t=e.handleChangePage,a=ct(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),E=b[0],j=b[1],O=Object(n.useState)({type:"error",title:null,body:null}),y=Object(l.a)(O,2),k=y[0],C=y[1],R=Object(n.useState)(!1),D=Object(l.a)(R,2),w=D[0],N=D[1],T=Object(n.useState)(!1),P=Object(l.a)(T,2),F=P[0],L=P[1],B=Object(n.useState)([]),A=Object(l.a)(B,2),I=A[0],_=A[1],q=Object(n.useState)([]),K=Object(l.a)(q,2),H=K[0],z=K[1],V=Object(n.useState)([{value:0,id:0,name:""}]),W=Object(l.a)(V,2),Y=W[0],J=W[1],M=Object(n.useState)(Y[0]),Q=Object(l.a)(M,2),U=Q[0],Z=Q[1];Object(n.useEffect)((function(){p(!0),Me().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=Y.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),J(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]);var X=function(e){Z(Y[e.target.value]),z([]),j(!1)},$=function(e){e.forEach((function(t,a){e[a].id=a+1})),z(e)},ee=function(e){if(j(!1),!tt(H,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void j(!0);p(!0),Xe("Delete",e,U).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void j(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void j(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Allowed statuses are 'Added', 'Checked in', 'Checked out'.")}),p(!1),void j(!0);var a=H.length+1,n=Object(l.a)(t.data.output.locationArray,3),o=n[1],c=n[2],s=U,i=nt(c),u=t.data.output.vialData.Status,m=at(new Date(Date.now())),d=v.a.get("username"),g=v.a.get("fullname"),b=H;b.push({id:a,barcode:e,project:s,box:o,poslabel:i,status:u,timestamp:m,username:d,fullname:g}),z(b),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," with status "," ",r.a.createElement("strong",null,u)," found at  ",r.a.createElement("strong",null,s.name+"-"+o+"-"+i))}),j(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},te=function(){0===s&&0===U.value?(C({type:"error",title:"Error",body:"No project selected."}),j(!0)):1===s&&0===H.length?(C({type:"error",title:"Error",body:"No items scanned."}),j(!0)):i(s+1)},ae=function(){i(s-1)},ne=function(){N(!w)},re=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(),N(!1),p(!0),Ue("Delete",H).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?L(!0):(L(!1),_(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Ce.a,{className:a.paper},r.a.createElement(G.a,{component:"h1",variant:"h4",align:"center"},"Delete"),r.a.createElement(Se.a,{activeStep:s,className:a.stepper},["Select project","Scan items"].map((function(e){return r.a.createElement(xe.a,{key:e},r.a.createElement(Re.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Te,{selectedProject:U,projects:Y,onProjectChange:X,isLoading:d});case 1:return r.a.createElement(Ie,{data:H,isLoading:d,selectedProject:U,onDataChange:$,onBarcodeSubmitted:ee});case 2:return r.a.createElement(Ke,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:I});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&2!==e&&n.push(r.a.createElement(S.a,{key:"button_back",name:"button_back",onClick:ae,className:a.button},"Back")),1===e&&H.length>0&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:ne,className:a.button},"Submit")),0===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:te,className:a.button},"Next")),2===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(Ye,{open:E,data:k,handleSnackbar:function(){j(!E)}}),r.a.createElement(Je,{open:w,data:{title:"Are you sure you want to submit the scanned items to CDD?"},handleDialog:ne,handleYesDialog:re}))))))},lt=Object(C.a)((function(e){return{appBar:{position:"relative"},layout:Object(A.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(A.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var it=function(e){var t=e.handleChangePage,a=lt(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),E=b[0],j=b[1],O=Object(n.useState)({type:"error",title:null,body:null}),y=Object(l.a)(O,2),k=y[0],C=y[1],R=Object(n.useState)(!1),D=Object(l.a)(R,2),w=D[0],N=D[1],T=Object(n.useState)(!1),P=Object(l.a)(T,2),F=P[0],L=P[1],B=Object(n.useState)([]),A=Object(l.a)(B,2),I=A[0],_=A[1],q=Object(n.useState)([]),K=Object(l.a)(q,2),H=K[0],z=K[1],V=Object(n.useState)([{value:0,id:0,name:""}]),W=Object(l.a)(V,2),Y=W[0],J=W[1],M=Object(n.useState)(Y[0]),Q=Object(l.a)(M,2),U=Q[0],Z=Q[1];Object(n.useEffect)((function(){p(!0),Me().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=Y.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),J(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]);var X=function(e){Z(Y[e.target.value]),z([]),j(!1)},$=function(e){e.forEach((function(t,a){e[a].id=a+1})),z(e)},ee=function(e){if(j(!1),!tt(H,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void j(!0);p(!0),Xe("Check-in",e,U).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void j(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void j(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Only vials with status 'Checked out' can be checked-in.")}),p(!1),void j(!0);var a=H.length+1,n=Object(l.a)(t.data.output.locationArray,3),o=n[1],c=n[2],s=U,i=nt(c),u=t.data.output.vialData.Status,m=at(new Date(Date.now())),d=v.a.get("username"),g=v.a.get("fullname"),b=H;b.push({id:a,barcode:e,project:s,box:o,poslabel:i,status:u,timestamp:m,username:d,fullname:g}),z(b),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," with status "," ",r.a.createElement("strong",null,u)," found at  ",r.a.createElement("strong",null,s.name+"-"+o+"-"+i))}),j(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},te=function(){0===s&&0===U.value?(C({type:"error",title:"Error",body:"No project selected."}),j(!0)):1===s&&0===H.length?(C({type:"error",title:"Error",body:"No items scanned."}),j(!0)):i(s+1)},ae=function(){i(s-1)},ne=function(){N(!w)},re=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(),N(!1),p(!0),Ue("Check-in",H).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?L(!0):(L(!1),_(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Ce.a,{className:a.paper},r.a.createElement(G.a,{component:"h1",variant:"h4",align:"center"},"Check-in"),r.a.createElement(Se.a,{activeStep:s,className:a.stepper},["Select project","Scan items"].map((function(e){return r.a.createElement(xe.a,{key:e},r.a.createElement(Re.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Te,{selectedProject:U,projects:Y,onProjectChange:X,isLoading:d});case 1:return r.a.createElement(Ie,{data:H,isLoading:d,selectedProject:U,onDataChange:$,onBarcodeSubmitted:ee});case 2:return r.a.createElement(Ke,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:I});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&2!==e&&n.push(r.a.createElement(S.a,{key:"button_back",name:"button_back",onClick:ae,className:a.button},"Back")),1===e&&H.length>0&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:ne,className:a.button},"Submit")),0===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:te,className:a.button},"Next")),2===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(Ye,{open:E,data:k,handleSnackbar:function(){j(!E)}}),r.a.createElement(Je,{open:w,data:{title:"Are you sure you want to submit the scanned items to CDD?"},handleDialog:ne,handleYesDialog:re}))))))},ut=Object(C.a)((function(e){return{appBar:{position:"relative"},layout:Object(A.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(A.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var mt=function(e){var t=e.handleChangePage,a=ut(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),E=b[0],j=b[1],O=Object(n.useState)({type:"error",title:null,body:null}),y=Object(l.a)(O,2),k=y[0],C=y[1],R=Object(n.useState)(!1),D=Object(l.a)(R,2),w=D[0],N=D[1],T=Object(n.useState)(!1),P=Object(l.a)(T,2),F=P[0],L=P[1],B=Object(n.useState)([]),A=Object(l.a)(B,2),I=A[0],_=A[1],q=Object(n.useState)([]),K=Object(l.a)(q,2),H=K[0],z=K[1],V=Object(n.useState)([{value:0,id:0,name:""}]),W=Object(l.a)(V,2),Y=W[0],J=W[1],M=Object(n.useState)(Y[0]),Q=Object(l.a)(M,2),U=Q[0],Z=Q[1];Object(n.useEffect)((function(){p(!0),Me().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=Y.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),J(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]);var X=function(e){Z(Y[e.target.value]),z([]),j(!1)},$=function(e){e.forEach((function(t,a){e[a].id=a+1})),z(e)},ee=function(e){if(j(!1),!tt(H,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void j(!0);p(!0),Xe("Check-out",e,U).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void j(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void j(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Allowed statuses are 'Added' and 'Checked in'.")}),p(!1),void j(!0);var a=H.length+1,n=Object(l.a)(t.data.output.locationArray,3),o=n[1],c=n[2],s=U,i=nt(c),u=t.data.output.vialData.Status,m=at(new Date(Date.now())),d=v.a.get("username"),g=v.a.get("fullname"),b=H;b.push({id:a,barcode:e,project:s,box:o,poslabel:i,status:u,timestamp:m,username:d,fullname:g}),z(b),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," with status "," ",r.a.createElement("strong",null,u)," found at  ",r.a.createElement("strong",null,s.name+"-"+o+"-"+i))}),j(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},te=function(){0===s&&0===U.value?(C({type:"error",title:"Error",body:"No project selected."}),j(!0)):1===s&&0===H.length?(C({type:"error",title:"Error",body:"No items scanned."}),j(!0)):i(s+1)},ae=function(){i(s-1)},ne=function(){N(!w)},re=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(),N(!1),p(!0),Ue("Check-out",H).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?L(!0):(L(!1),_(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Ce.a,{className:a.paper},r.a.createElement(G.a,{component:"h1",variant:"h4",align:"center"},"Check-out"),r.a.createElement(Se.a,{activeStep:s,className:a.stepper},["Select project","Scan items"].map((function(e){return r.a.createElement(xe.a,{key:e},r.a.createElement(Re.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Te,{selectedProject:U,projects:Y,onProjectChange:X,isLoading:d});case 1:return r.a.createElement(Ie,{data:H,isLoading:d,selectedProject:U,onDataChange:$,onBarcodeSubmitted:ee});case 2:return r.a.createElement(Ke,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:I});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&2!==e&&n.push(r.a.createElement(S.a,{key:"button_back",name:"button_back",onClick:ae,className:a.button},"Back")),1===e&&H.length>0&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:ne,className:a.button},"Submit")),0===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:te,className:a.button},"Next")),2===e&&n.push(r.a.createElement(S.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(Ye,{open:E,data:k,handleSnackbar:function(){j(!E)}}),r.a.createElement(Je,{open:w,data:{title:"Are you sure you want to submit the scanned items to CDD?"},handleDialog:ne,handleYesDialog:re}))))))},dt=a(421),pt=a.n(dt),gt=Object(C.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},backButton:{marginRight:e.spacing(2)},title:{flexGrow:1},hide:{display:"none"},drawerHeader:Object(I.a)(Object(I.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}}));function bt(e){var t=gt(),a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(!1),u=Object(l.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(!1),g=Object(l.a)(p,2),b=g[0],f=g[1],h=Object(n.useState)(""),E=Object(l.a)(h,2),j=E[0],O=E[1],y=Object(n.useState)("Home"),k=Object(l.a)(y,2),C=k[0],R=k[1];Object(n.useEffect)((function(){window.addEventListener("beforeunload",(function(e){var t="true"===v.a.get("remember");e.preventDefault(),t||(console.log("Remember was false, remove all cookies"),v.a.remove("username"),v.a.remove("token"),v.a.remove("authentication"),v.a.remove("remember"))}))}));var D=function(){d(!m)},w=function(){d(!1),["Add","Delete","Check-in","Check-out"].includes(j)?f(!0):f(!1),O(C),R(j)},N=function(e){["Add","Delete","Check-in","Check-out"].includes(e)?f(!0):f(!1),O(C),R(e)};return r.a.createElement("div",{className:t.root},r.a.createElement(x.a,null),r.a.createElement(q.a,{position:"fixed",className:Object(_.a)(t.appBar,Object(A.a)({},t.appBarShift,c))},r.a.createElement(K.a,null,r.a.createElement(H.a,{edge:"start",className:t.backButton,color:"inherit","aria-label":"back drawer",onClick:function(){b?d(!0):w()}},r.a.createElement(Z.a,null)),r.a.createElement("img",{src:pt.a,width:150}),r.a.createElement(G.a,{variant:"h6",noWrap:!0,className:t.title}," "),r.a.createElement(H.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){s(!c)},disableRipple:!1},c?r.a.createElement($.a,null):r.a.createElement(Q.a,null)))),r.a.createElement("main",{className:Object(_.a)(t.content,Object(A.a)({},t.contentShift,c))},r.a.createElement("div",{className:t.drawerHeader}),function(e){switch(e){case"Add":return r.a.createElement(ot,{handleChangePage:N});case"Delete":return r.a.createElement(st,{handleChangePage:N});case"Check-in":return r.a.createElement(it,{handleChangePage:N});case"Check-out":return r.a.createElement(mt,{handleChangePage:N});default:return r.a.createElement(ke,{handleChangePage:N})}}(C)),r.a.createElement(ie,{open:c}),r.a.createElement(z.a,{open:m,onClose:D,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(V.a,{id:"alert-dialog-title"},"Are you sure you want to go back?"),r.a.createElement(W.a,null,r.a.createElement(Y.a,{id:"alert-dialog-description"},"All scanned data will be deleted.")),r.a.createElement(J.a,null,r.a.createElement(S.a,{onClick:w,color:"primary"},"Yes"),r.a.createElement(S.a,{onClick:D,color:"primary",autoFocus:!0},"No"))))}var ft=Object(d.a)({palette:{primary:{main:"#173D5C",light:"#476789",dark:"#001732"},secondary:{main:"#b71c1c",light:"#f05545",dark:"#7f0000"},error:{main:"#d32f2f",light:"#ff6659",dark:"#9a0007"},warning:{main:"#ffab00",light:"#ffdd4b",dark:"#c67c00"},success:{main:"#388e3c",light:"#6abf69",dark:"#00600f"}}});function ht(e){var t=e.auth,a=e.component,n=Object(s.a)(e,["auth","component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(u.a,{to:{pathname:"/login"}})}}))}function Et(e){var t=e.auth,a=e.component,n=Object(s.a)(e,["auth","component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(u.a,{to:{pathname:"/dashboard"}}):r.a.createElement(a,e)}}))}var vt=function(){var e=r.a.useContext(g);return r.a.createElement(u.d,null,r.a.createElement(ht,{path:"/dashboard",exact:!0,auth:e.auth,component:bt}),r.a.createElement(Et,{path:"/login",exact:!0,auth:e.auth,component:B}),r.a.createElement(Et,{path:"/",auth:e.auth,component:B}))},jt=function(){var e=Object(m.a)("authentication",!1),t=Object(l.a)(e,3),a=t[0],n=t[1];return t[2],r.a.createElement(p.a,{theme:ft},r.a.createElement(g.Provider,{value:{auth:a,setAuth:n}},r.a.createElement(i.a,null,r.a.createElement(vt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(jt,null),document.getElementById("root"))}},[[433,1,2]]]);
//# sourceMappingURL=main.bcd058b8.chunk.js.map