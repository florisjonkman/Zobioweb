(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{278:function(e,t){},411:function(e,t,a){e.exports=a.p+"static/media/ZobioLogo.41100ac4.svg"},414:function(e,t,a){e.exports=a.p+"static/media/FridgeIn2.22ff45d4.svg"},415:function(e,t,a){e.exports=a.p+"static/media/FridgeOut2.fc1742cc.svg"},422:function(e,t,a){e.exports=a.p+"static/media/ZobioLogo_Flat.c938947b.svg"},434:function(e,t,a){e.exports=a(562)},562:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),s=a(303),l=a(13),i=a(426),u=a(108),m=a(410),d=a(138),p=a(604),g=r.a.createContext(),b=a(19),f=a.n(b),h=a(122),E=a.n(h),v=a(150),j=a.n(v),O=a(366),y=a(369),k=a(590),C=a(368),S=a(367),x=a(589),R=a(411),D=a.n(R),w=a(33),N=a.n(w),T=a(60),P="http://192.168.60.12:8080";function F(){return(F=Object(T.a)(N.a.mark((function e(t,a){var n,r,o,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching checking ldap account..."),n=j.a.pki.publicKeyFromPem("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDA/MD2URSiNjkpSA3r7GritU0b\nfXC27iof34O1Lo1TFJrJVK+Z+vJqQXc3zdnXY/oclLNWlwqXqZlc1HqCOqzailAf\nI0eJXxxehGLW1dMOygi8yExGR3cwqZIAkGk2tUaw4BdRAOhFIcGapZ1mBLtrorZI\n/Cb6QpRGKiERlPrk7QIDAQAB\n-----END PUBLIC KEY-----"),r=n.encrypt(a,"RSA-OAEP",{md:j.a.md.sha256.create(),mgf1:j.a.mgf1.create()}),o=j.a.util.encode64(r),e.next=6,E()({url:P+"/login",method:"post",headers:{username:t,password:o}});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return B.apply(this,arguments)}function B(){return(B=Object(T.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching all projects..."),t=f.a.get("token"),e.next=4,E()({url:P+"/projects",method:"get",headers:{Token:t}});case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return(I=Object(T.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching send data to CDD..."),n=f.a.get("token"),e.next=4,E()({url:P+"/submitdata",method:"post",headers:{Token:n},data:{type:t,data:a}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,a){return q.apply(this,arguments)}function q(){return(q=Object(T.a)(N.a.mark((function e(t,a,n){var r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching position..."),r=f.a.get("token"),e.next=4,E()({url:P+"/getlocation",method:"post",headers:{Token:r},data:{type:t,project:n,barcode:a}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(T.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.value){e.next=2;break}return e.abrupt("return");case 2:return console.log("Fetching last position..."),a=f.a.get("token"),e.next=6,E()({url:P+"/getlastlocation",method:"post",headers:{Token:a},data:t});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var H=function(e){var t=G(),a=r.a.useContext(g),o=Object(n.useState)(""),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(""),m=Object(l.a)(u,2),d=m[0],p=m[1],b=Object(n.useState)(!1),h=Object(l.a)(b,2),E=h[0],v=h[1],j=Object(n.useState)(!1),O=Object(l.a)(j,2),R=O[0],w=O[1],N=Object(n.useState)(!1),T=Object(l.a)(N,2),P=T[0],L=T[1],B=function(e){var t=e.target,a=t.value,n=t.name;"username"===n&&i(a),"password"===n&&p(a),"remember"===n&&v(!E)};return r.a.createElement(r.a.Fragment,null,P&&r.a.createElement(S.a,null),r.a.createElement(x.a,{component:"main",maxWidth:"xs"},r.a.createElement(k.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement("img",{src:D.a,width:200}),r.a.createElement("form",{className:t.form},r.a.createElement(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:R,value:s,id:"username",name:"username",label:"Username",autoComplete:"username",autoFocus:!0,onChange:B}),r.a.createElement(C.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,error:R,value:d,id:"password",name:"password",label:"Password",type:"password",autoComplete:"current-password",onChange:B}),r.a.createElement(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(t){t.preventDefault();var n=e.history;L(!0),function(e,t){return F.apply(this,arguments)}(s,d).then((function(e){console.log(e),200==e.status&&"OK"==e.statusText?(console.log(e.data.message),a.setAuth(!0),f.a.set("username",e.data.output.userData.username,{expires:1}),f.a.set("fullname",e.data.output.userData.cn,{expires:1}),f.a.set("authentication",!0,{expires:1}),f.a.set("token",e.data.output.token,{expires:1}),f.a.set("remember",E,{expires:1}),n.push("/dashboard")):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e),L(!1))})).catch((function(e){w(!0),e.response?console.error("ERROR fetchCheckLDAP(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),L(!1)}))}},"Sign In")))))},V=a(43),W=a(152),Y=a(2),J=a(413),M=a.n(J),Q=a(605),U=a(376),z=a(44),Z=a(296),X=a(597),$=a(607),ee=a(598),te=a(606),ae=a(599),ne=a(424),re=a.n(ne),oe=a(423),ce=a.n(oe),se=a(425),le=a.n(se),ie=a(75),ue=a(570),me=a(591),de=a(573),pe=a(592),ge=a(370),be=a(281),fe=a(615),he=Object(O.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(W.a)(Object(W.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),buttonSignOut:{display:"flex",justifyContent:"center",marginBottom:10}}}));var Ee=function(e){var t=e.open,a=he(),n=f.a.get("fullname");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{className:a.drawer,variant:"persistent",anchor:"right",open:t,classes:{paper:a.drawerPaper}},r.a.createElement(me.a,null),r.a.createElement(be.a,{flexGrow:1},r.a.createElement(ue.a,null,r.a.createElement(de.a,null,r.a.createElement(ge.a,{secondary:"Account"})),r.a.createElement(de.a,null,r.a.createElement(pe.a,null,r.a.createElement(fe.a,{"aria-label":"recipe",component:"a"},n?n.charAt(0).toUpperCase():"")),r.a.createElement(ge.a,{primary:n})))),r.a.createElement(ue.a,null,r.a.createElement("div",{className:a.buttonSignOut},r.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:function(){f.a.remove("username"),f.a.remove("fullname"),f.a.remove("authentication"),f.a.remove("remember"),f.a.remove("token")},href:"/"},"Sign out")))))},ve=a(593),je=a(594),Oe=a(596),ye=a(595),ke=a(416),Ce=a.n(ke),Se=a(236),xe=a.n(Se),Re=a(414),De=a.n(Re),we=a(415),Ne=a.n(we),Te=Object(O.a)((function(e){return{buttons:{margin:10},avatarAdd:{backgroundColor:e.palette.success.main},avatarCheck:{backgroundColor:e.palette.warning.main},avatarDelete:{backgroundColor:e.palette.error.main}}}));var Pe=function(e){var t=e.handleChangePage,a=Te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{className:a.buttons},r.a.createElement(je.a,null,r.a.createElement(ye.a,{onClick:function(){t("Add")},underline:"none",color:"textPrimary"},r.a.createElement(Oe.a,{avatar:r.a.createElement(fe.a,{"aria-label":"recipe",className:a.avatarAdd},r.a.createElement(xe.a,{fontSize:"large"})),title:"Add",subheader:"Scan new vials and add them to a project"})))),r.a.createElement(ve.a,{className:a.buttons},r.a.createElement(je.a,null,r.a.createElement(ye.a,{onClick:function(){t("Check-out")},underline:"none",color:"textPrimary"},r.a.createElement(Oe.a,{avatar:r.a.createElement(fe.a,{"aria-label":"recipe",className:a.avatarCheck},r.a.createElement("img",{src:Ne.a,width:22})),title:"Check-out",subheader:"Scan vials and use them in the lab"})))),r.a.createElement(ve.a,{className:a.buttons},r.a.createElement(je.a,null,r.a.createElement(ye.a,{onClick:function(){t("Check-in")},underline:"none",color:"textPrimary"},r.a.createElement(Oe.a,{avatar:r.a.createElement(fe.a,{"aria-label":"recipe",className:a.avatarCheck},r.a.createElement("img",{src:De.a,width:22})),title:"Check-in",subheader:"Scan vials and place them back into the fridge"})))),r.a.createElement(ve.a,{className:a.buttons},r.a.createElement(je.a,null,r.a.createElement(ye.a,{onClick:function(){t("Delete")},underline:"none",color:"textPrimary"},r.a.createElement(Oe.a,{avatar:r.a.createElement(fe.a,{"aria-label":"recipe",className:a.avatarDelete},r.a.createElement(Ce.a,{fontSize:"large"})),title:"Delete",subheader:"Scan vials and delete them from the project"})))))},Fe=a(103),Le=a(611),Be=a(609),Ae=a(610),Ie=a(298),_e=a(371),qe=Object(O.a)((function(e){return{title:{display:"flex",justifyContent:"center",marginBottom:e.spacing(3),marginRight:e.spacing(1),marginLeft:e.spacing(1)},select:{width:200,marginRight:e.spacing(1),marginLeft:e.spacing(1)},arrange:{display:"flex",justifyContent:"center"}}}));var Ke=function(e){var t=e.selectedProject,a=e.projects,n=e.onProjectChange,o=e.isLoading,c=qe();return r.a.createElement("div",null,r.a.createElement(z.a,{variant:"h5",gutterBottom:!0,className:c.title},"Select project"),r.a.createElement("div",{className:c.arrange},o?r.a.createElement(_e.a,null):r.a.createElement(Ie.a,{native:!0,variant:"outlined",name:"selectedproject",key:"selectedproject_select",id:"selectedproject_select",value:t.value,onChange:n,className:c.select},a.map((function(e,t){return r.a.createElement("option",{value:e.value,key:"project_"+e.name},e.name)})))))},Ge=a(237),He=a.n(Ge),Ve=a(407),We=Object(O.a)((function(e){return{inputLabel:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},circular:{color:e.palette.success.main,marginRight:e.spacing(1),marginLeft:e.spacing(1)},chip:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},button:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},buttons:{marginTop:e.spacing(5),display:"flex",alignItems:"center",justifyContent:"center"}}})),Ye=Object(d.a)({overrides:{MuiTableRow:{root:{"&:hover":{backgroundColor:"#f5f5f5"}}}}});var Je=function(e){var t=e.data,a=e.selectedProject,o=e.onDataChange,c=e.onBarcodeSubmitted,s=e.isLoading,i=We(),u=Object(n.useState)(""),m=Object(l.a)(u,2),d=m[0],g=m[1],b=function(e){e.preventDefault(),""!==d&&(c(d),g(""))};return r.a.createElement("div",null,r.a.createElement(p.a,{theme:Ye},r.a.createElement(He.a,{components:{Container:function(e){return r.a.createElement(Fe.a,Object.assign({},e,{elevation:0}))}},title:"Scanned vials",options:{paging:!1,search:!1,showTitle:!0,toolbar:!0},columns:[{title:"No",field:"id",editable:"never"},{title:"Vial barcode",field:"barcode",editable:"never"},{title:"Project",field:"project",editable:"never",render:function(e){return e.project.name}},{title:"Box",field:"box",editable:"never"},{title:"Position",field:"poslabel",editable:"never"},{title:"Status",field:"status",editable:"never"}],localization:{header:{actions:""}},data:t,editable:{onRowDelete:function(e){return new Promise((function(a,n){setTimeout((function(){var n=Array.from(t),r=n.indexOf(e);n.splice(r,1),o(n),a()}),10)}))}}})),s&&r.a.createElement(S.a,null),r.a.createElement("div",{className:i.buttons},r.a.createElement(Ve.a,{disabled:!0,className:i.chip,label:a.name}),r.a.createElement(C.a,{variant:"outlined",value:d,name:"barcode",key:"scanitems_barcode",id:"scanitems_barcode",label:"Barcode",className:i.inputLabel,onChange:function(e){g(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(s?g(""):b(e))},autoFocus:!0}),r.a.createElement(y.a,{name:"barcode",variant:"contained","aria-label":"add",color:"primary",className:i.button,onClick:b,disabled:s},s&&r.a.createElement(_e.a,{size:35}),!s&&r.a.createElement(xe.a,{fontSize:"large"}))))},Me=Object(O.a)((function(e){return{title:{display:"flex",justifyContent:"center",marginBottom:e.spacing(3),marginRight:e.spacing(1),marginLeft:e.spacing(1)},select:{marginRight:e.spacing(1),marginLeft:e.spacing(1)},line:{display:"flex",justifyContent:"space-around",alignItems:"center"},block:{width:1e3,display:"flex"}}})),Qe=function(e){return r.a.createElement(He.a,{components:{Container:function(e){return r.a.createElement(Fe.a,Object.assign({},e,{elevation:0}))}},title:"Response from CDD",options:{paging:!1,search:!1,showTitle:!0,toolbar:!0,exportButton:!0,exportFileName:"FailedSubmittedBarcodes",rowStyle:{height:10}},columns:[{title:"CDD ID",field:"id",editable:"never"},{title:"Vial barcode",field:"barcode",editable:"never"},{title:"CDD Status",field:"status",editable:"never"},{title:"CDD Location",field:"location",editable:"never"},{title:"CDD Response",field:"message",editable:"never",render:function(e){return e["post response"].message}},{title:"CDD Response",field:"cddResponse",editable:"never",render:function(e){return JSON.stringify(e["post response"].response)}}],data:e.data})};var Ue=function(e){var t=e.isLoading,a=e.allItemsSubmitted,n=e.failedSubmittedItems,o=Me();return r.a.createElement("div",{className:o.line},t?r.a.createElement(_e.a,null):a?r.a.createElement(z.a,{variant:"h5",gutterBottom:!0,className:o.title},"Data changes successfully submitted to CDD."):r.a.createElement("div",null,r.a.createElement("div",{className:o.line},r.a.createElement(z.a,{variant:"subtitle1",color:"error"},"Not all data changes successfully submitted to CDD.")),r.a.createElement("br",null),r.a.createElement(Qe,{data:n,className:o.block}),r.a.createElement("br",null),r.a.createElement("div",{className:o.line},r.a.createElement(z.a,{variant:"subtitle1"},"Please report to Stijn"))))},ze=Object(O.a)((function(e){return{title:{display:"flex",justifyContent:"center",marginBottom:e.spacing(3),marginRight:e.spacing(1),marginLeft:e.spacing(1)},select:{width:200,marginRight:e.spacing(1),marginLeft:e.spacing(1)},arrange:{display:"flex",justifyContent:"center"}}}));var Ze=function(){var e=ze(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0];return a[1],r.a.createElement("div",null,r.a.createElement(z.a,{variant:"h5",gutterBottom:!0,className:e.title},"Print Labels"),r.a.createElement("div",{className:e.arrange},o?r.a.createElement(_e.a,null):r.a.createElement("div",null,r.a.createElement(z.a,{variant:"subtitle1"},"Press the print labels button and follow the instructions, when finshed 'submit' the items to CDD"))))},Xe=a(613),$e=a(612),et=a(608);var tt=function(e){var t=e.open,a=e.data,n=e.handleSnackbar;return r.a.createElement(et.a,{open:t,autoHideDuration:1e4,onClose:n},r.a.createElement(Xe.a,{severity:a.type,onClose:n},r.a.createElement($e.a,null,a.title),a.body))};var at=function(e){var t=e.open,a=e.data,n=e.handleDialog,o=e.handleYesDialog;return r.a.createElement(X.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement($.a,{id:"alert-dialog-title"},a.title),a.body&&r.a.createElement(ee.a,null,r.a.createElement(te.a,{id:"alert-dialog-description"},a.body)),r.a.createElement(ae.a,null,r.a.createElement(y.a,{onClick:o,color:"primary"},"Yes"),r.a.createElement(y.a,{onClick:n,color:"primary",autoFocus:!0},"No")))};function nt(e,t){var a=!0;return e.forEach((function(e,n){if(t===e.barcode)return a=!1})),a}function rt(e){var t=["Jan","Feb","Mrt","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"][e.getMonth()],a=""+e.getDate(),n=""+e.getFullYear(),r=""+e.getHours(),o=""+e.getMinutes();return a=a.length>1?a:"0"+a,(r=r.length>1?r:"0"+r)+":"+(o=o.length>1?o:"0"+o)+", "+a+" "+t+" "+n}function ot(e){return["A","B","C","D","E","F","G","H","I"][Math.floor(e/10)-1]+(e%10).toString()}var ct=Object(O.a)((function(e){return{appBar:{position:"relative"},layout:Object(V.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(V.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var st=function(e){var t=e.handleChangePage,a=ct(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),h=b[0],E=b[1],v=Object(n.useState)({type:"error",title:null,body:null}),j=Object(l.a)(v,2),O=j[0],C=j[1],S=Object(n.useState)(!1),x=Object(l.a)(S,2),R=x[0],D=x[1],w=Object(n.useState)(!1),P=Object(l.a)(w,2),F=P[0],B=P[1],I=Object(n.useState)([]),q=Object(l.a)(I,2),G=q[0],H=q[1],V=Object(n.useState)([null,null]),W=Object(l.a)(V,2),Y=W[0],J=W[1],M=Object(n.useState)([null,null]),Q=Object(l.a)(M,2),U=Q[0],Z=Q[1],X=Object(n.useState)([]),$=Object(l.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)([{value:0,id:0,name:""}]),ne=Object(l.a)(ae,2),re=ne[0],oe=ne[1],ce=Object(n.useState)(re[0]),se=Object(l.a)(ce,2),le=se[0],ie=se[1];Object(n.useEffect)((function(){p(!0),L().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=re.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),oe(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]),Object(n.useEffect)((function(){0!==le.value&&(p(!0),function(e){return K.apply(this,arguments)}(le).then((function(e){if(console.log(e),e&&200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=e.data.output["last location"].slice(1,3),a=Object(l.a)(t,2),n=a[0],r=a[1];Z([n,r]),J([n,r])}p(!1)})).catch((function(e){e.response?console.error("ERROR fetchLastPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)})))}),[le]);var ue=function(e){ie(re[e.target.value]),te([]),E(!1)},me=function(e){var t,a;e.forEach((function(n,r){e[r].id=r+1,t=e[r].box,a=function(e){var t=e.substring(0,1),a=parseInt(e.substring(1,2));return 10*(["A","B","C","D","E","F","G","H","I"].indexOf(t)+1)+a}(e[r].poslabel)}));var n=Y[0],r=Y[1];a||t?t===n&&a===r||(J([t,a]),console.log("Latest position NOT the same as lastLocation","box: ".concat(n," -> ").concat(t,", pos: ").concat(r," -> ").concat(a))):J(U),te(e)},de=function(e){if(E(!1),!nt(ee,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void E(!0);p(!0),_("Add",e,le).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void E(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void E(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Only vials with status 'Registered' can be added.")}),p(!1),void E(!0);var a=ee.length+1,n=le,o=function(e,t){var a=1,n=11;return e||t?(t>=99?(a=e+1,n=11):t%10===9?(a=e,n=t+2):(a=e,n=t+1),[a,n]):[a,n]}(Y[0],Y[1]),c=Object(l.a)(o,2),s=c[0],i=c[1],u=ot(i),m=t.data.output.vialData.Status,d=rt(new Date(Date.now())),g=f.a.get("username"),b=f.a.get("fullname"),h=ee;h.push({id:a,barcode:e,project:n,box:s,poslabel:u,status:m,timestamp:d,username:g,fullname:b}),te(h),J([s,i]),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," to ",r.a.createElement("strong",null,s+"-"+u))}),E(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},pe=function(){0===s&&0===le.value?(C({type:"error",title:"Error",body:"No project selected."}),E(!0)):1===s&&0===ee.length?(C({type:"error",title:"Error",body:"No items scanned."}),E(!0)):i(s+1)},ge=function(){i(s-1)},be=function(){console.log("Add: handlePrint: printing data"),console.log(ee)},fe=function(){D(!R)},he=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pe(),D(!1),p(!0),A("Add",ee).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?B(!0):(B(!1),H(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Fe.a,{className:a.paper},r.a.createElement(z.a,{component:"h1",variant:"h4",align:"center"},"Add"),r.a.createElement(Le.a,{activeStep:s,className:a.stepper},["Select project","Scan barcodes","Print Labels"].map((function(e){return r.a.createElement(Be.a,{key:e},r.a.createElement(Ae.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Ke,{selectedProject:le,projects:re,onProjectChange:ue,isLoading:d});case 1:return r.a.createElement(Je,{data:ee,selectedProject:le,onDataChange:me,onBarcodeSubmitted:de,isLoading:d});case 2:return r.a.createElement(Ze,null);case 3:return r.a.createElement(Ue,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:G});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&3!==e&&n.push(r.a.createElement(y.a,{key:"button_back",name:"button_back",onClick:ge,className:a.button},"Back")),2===e&&(n.push(r.a.createElement(y.a,{key:"button_printlabel",name:"button_printlabel",onClick:be,variant:"contained",color:"secondary",className:a.button},"Print Labels")),n.push(r.a.createElement(y.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:fe,className:a.button},"Submit"))),0!==e&&1!==e||n.push(r.a.createElement(y.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:pe,className:a.button},"Next")),3===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(tt,{open:h,data:O,handleSnackbar:function(){E(!h)}}),r.a.createElement(at,{open:R,data:{title:"Are you sure you want to add the scanned vials to CDD?",body:"The labels must be printed and attached to vials before submitting the data to CDD."},handleDialog:fe,handleYesDialog:he}))))))},lt=Object(O.a)((function(e){return{appBar:{position:"relative"},layout:Object(V.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(V.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var it=function(e){var t=e.handleChangePage,a=lt(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),h=b[0],E=b[1],v=Object(n.useState)({type:"error",title:null,body:null}),j=Object(l.a)(v,2),O=j[0],C=j[1],S=Object(n.useState)(!1),x=Object(l.a)(S,2),R=x[0],D=x[1],w=Object(n.useState)(!1),P=Object(l.a)(w,2),F=P[0],B=P[1],I=Object(n.useState)([]),q=Object(l.a)(I,2),K=q[0],G=q[1],H=Object(n.useState)([]),V=Object(l.a)(H,2),W=V[0],Y=V[1],J=Object(n.useState)([{value:0,id:0,name:""}]),M=Object(l.a)(J,2),Q=M[0],U=M[1],Z=Object(n.useState)(Q[0]),X=Object(l.a)(Z,2),$=X[0],ee=X[1];Object(n.useEffect)((function(){p(!0),L().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=Q.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),U(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]);var te=function(e){ee(Q[e.target.value]),Y([]),E(!1)},ae=function(e){e.forEach((function(t,a){e[a].id=a+1})),Y(e)},ne=function(e){if(E(!1),!nt(W,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void E(!0);p(!0),_("Delete",e,$).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void E(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void E(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Allowed statuses are 'Added', 'Checked in', 'Checked out'.")}),p(!1),void E(!0);var a=W.length+1,n=Object(l.a)(t.data.output.locationArray,3),o=n[1],c=n[2],s=$,i=ot(c),u=t.data.output.vialData.Status,m=rt(new Date(Date.now())),d=f.a.get("username"),g=f.a.get("fullname"),b=W;b.push({id:a,barcode:e,project:s,box:o,poslabel:i,status:u,timestamp:m,username:d,fullname:g}),Y(b),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," with status "," ",r.a.createElement("strong",null,u)," found at  ",r.a.createElement("strong",null,s.name+"-"+o+"-"+i))}),E(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},re=function(){0===s&&0===$.value?(C({type:"error",title:"Error",body:"No project selected."}),E(!0)):1===s&&0===W.length?(C({type:"error",title:"Error",body:"No items scanned."}),E(!0)):i(s+1)},oe=function(){i(s-1)},ce=function(){D(!R)},se=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(),D(!1),p(!0),A("Delete",W).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?B(!0):(B(!1),G(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Fe.a,{className:a.paper},r.a.createElement(z.a,{component:"h1",variant:"h4",align:"center"},"Delete"),r.a.createElement(Le.a,{activeStep:s,className:a.stepper},["Select project","Scan barcodes"].map((function(e){return r.a.createElement(Be.a,{key:e},r.a.createElement(Ae.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Ke,{selectedProject:$,projects:Q,onProjectChange:te,isLoading:d});case 1:return r.a.createElement(Je,{data:W,isLoading:d,selectedProject:$,onDataChange:ae,onBarcodeSubmitted:ne});case 2:return r.a.createElement(Ue,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:K});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&2!==e&&n.push(r.a.createElement(y.a,{key:"button_back",name:"button_back",onClick:oe,className:a.button},"Back")),1===e&&W.length>0&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:ce,className:a.button},"Submit")),0===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:re,className:a.button},"Next")),2===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(tt,{open:h,data:O,handleSnackbar:function(){E(!h)}}),r.a.createElement(at,{open:R,data:{title:"Are you sure you want to delete the scanned vials from CDD?"},handleDialog:ce,handleYesDialog:se}))))))},ut=Object(O.a)((function(e){return{appBar:{position:"relative"},layout:Object(V.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(V.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var mt=function(e){var t=e.handleChangePage,a=ut(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),h=b[0],E=b[1],v=Object(n.useState)({type:"error",title:null,body:null}),j=Object(l.a)(v,2),O=j[0],C=j[1],S=Object(n.useState)(!1),x=Object(l.a)(S,2),R=x[0],D=x[1],w=Object(n.useState)(!1),P=Object(l.a)(w,2),F=P[0],B=P[1],I=Object(n.useState)([]),q=Object(l.a)(I,2),K=q[0],G=q[1],H=Object(n.useState)([]),V=Object(l.a)(H,2),W=V[0],Y=V[1],J=Object(n.useState)([{value:0,id:0,name:""}]),M=Object(l.a)(J,2),Q=M[0],U=M[1],Z=Object(n.useState)(Q[0]),X=Object(l.a)(Z,2),$=X[0],ee=X[1];Object(n.useEffect)((function(){p(!0),L().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=Q.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),U(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]);var te=function(e){ee(Q[e.target.value]),Y([]),E(!1)},ae=function(e){e.forEach((function(t,a){e[a].id=a+1})),Y(e)},ne=function(e){if(E(!1),!nt(W,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void E(!0);p(!0),_("Check-in",e,$).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void E(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void E(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Only vials with status 'Checked out' can be checked-in.")}),p(!1),void E(!0);var a=W.length+1,n=Object(l.a)(t.data.output.locationArray,3),o=n[1],c=n[2],s=$,i=ot(c),u=t.data.output.vialData.Status,m=rt(new Date(Date.now())),d=f.a.get("username"),g=f.a.get("fullname"),b=W;b.push({id:a,barcode:e,project:s,box:o,poslabel:i,status:u,timestamp:m,username:d,fullname:g}),Y(b),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," with status "," ",r.a.createElement("strong",null,u)," found at  ",r.a.createElement("strong",null,s.name+"-"+o+"-"+i))}),E(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},re=function(){0===s&&0===$.value?(C({type:"error",title:"Error",body:"No project selected."}),E(!0)):1===s&&0===W.length?(C({type:"error",title:"Error",body:"No items scanned."}),E(!0)):i(s+1)},oe=function(){i(s-1)},ce=function(){D(!R)},se=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(),D(!1),p(!0),A("Check-in",W).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?B(!0):(B(!1),G(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Fe.a,{className:a.paper},r.a.createElement(z.a,{component:"h1",variant:"h4",align:"center"},"Check-in"),r.a.createElement(Le.a,{activeStep:s,className:a.stepper},["Select project","Scan barcodes"].map((function(e){return r.a.createElement(Be.a,{key:e},r.a.createElement(Ae.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Ke,{selectedProject:$,projects:Q,onProjectChange:te,isLoading:d});case 1:return r.a.createElement(Je,{data:W,isLoading:d,selectedProject:$,onDataChange:ae,onBarcodeSubmitted:ne});case 2:return r.a.createElement(Ue,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:K});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&2!==e&&n.push(r.a.createElement(y.a,{key:"button_back",name:"button_back",onClick:oe,className:a.button},"Back")),1===e&&W.length>0&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:ce,className:a.button},"Submit")),0===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:re,className:a.button},"Next")),2===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(tt,{open:h,data:O,handleSnackbar:function(){E(!h)}}),r.a.createElement(at,{open:R,data:{title:"Are you sure you want to check-in the scanned vials to CDD?"},handleDialog:ce,handleYesDialog:se}))))))},dt=Object(O.a)((function(e){return{appBar:{position:"relative"},layout:Object(V.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}),paper:Object(V.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}));var pt=function(e){var t=e.handleChangePage,a=dt(),o=Object(n.useState)(0),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),h=b[0],E=b[1],v=Object(n.useState)({type:"error",title:null,body:null}),j=Object(l.a)(v,2),O=j[0],C=j[1],S=Object(n.useState)(!1),x=Object(l.a)(S,2),R=x[0],D=x[1],w=Object(n.useState)(!1),P=Object(l.a)(w,2),F=P[0],B=P[1],I=Object(n.useState)([]),q=Object(l.a)(I,2),K=q[0],G=q[1],H=Object(n.useState)([]),V=Object(l.a)(H,2),W=V[0],Y=V[1],J=Object(n.useState)([{value:0,id:0,name:""}]),M=Object(l.a)(J,2),Q=M[0],U=M[1],Z=Object(n.useState)(Q[0]),X=Object(l.a)(Z,2),$=X[0],ee=X[1];Object(n.useEffect)((function(){p(!0),L().then((function(e){if(console.log(e),200===e.status&&"OK"===e.statusText){console.log(e.data.message);var t=Q.concat(e.data.output.projects);t.forEach((function(e,a){t[a].value=a})),U(t)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(e);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchProjects(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))}),[]);var te=function(e){ee(Q[e.target.value]),Y([]),E(!1)},ae=function(e){e.forEach((function(t,a){e[a].id=a+1})),Y(e)},ne=function(e){if(E(!1),!nt(W,e))return C({type:"error",title:"Error",body:"Barcode already scanned."}),void E(!0);p(!0),_("Check-out",e,$).then((function(t){if(console.log(t),200===t.status&&"OK"===t.statusText){if(!t.data.output.isInCDD)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," not found in CDD Vault.")}),p(!1),void E(!0);if(!t.data.output.isInCorrectProject)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," found in different project: ",r.a.createElement("strong",null,t.data.output.vialData.project.name))}),p(!1),void E(!0);if(!t.data.output.isCorrectStatus)return C({type:"error",title:"Error",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," has incorrect status: ",r.a.createElement("strong",null,t.data.output.vialData.Status),".",r.a.createElement("br",null),"Allowed statuses are 'Added' and 'Checked in'.")}),p(!1),void E(!0);var a=W.length+1,n=Object(l.a)(t.data.output.locationArray,3),o=n[1],c=n[2],s=$,i=ot(c),u=t.data.output.vialData.Status,m=rt(new Date(Date.now())),d=f.a.get("username"),g=f.a.get("fullname"),b=W;b.push({id:a,barcode:e,project:s,box:o,poslabel:i,status:u,timestamp:m,username:d,fullname:g}),Y(b),C({type:"success",title:"Success",body:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,e)," with status "," ",r.a.createElement("strong",null,u)," found at  ",r.a.createElement("strong",null,s.name+"-"+o+"-"+i))}),E(!0)}else console.error("ERROR: Request succeeded, but status not 200"),console.error(t);p(!1)})).catch((function(e){e.response?console.error("ERROR fetchPosition(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}))},re=function(){0===s&&0===$.value?(C({type:"error",title:"Error",body:"No project selected."}),E(!0)):1===s&&0===W.length?(C({type:"error",title:"Error",body:"No items scanned."}),E(!0)):i(s+1)},oe=function(){i(s-1)},ce=function(){D(!R)},se=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re(),D(!1),p(!0),A("Check-out",W).then((function(e){console.log(e),200===e.status&&"OK"===e.statusText?(console.log(e.data.message),e.data.output.success?B(!0):(B(!1),G(e.data.output.failedVials))):(console.error("ERROR: Request succeeded, but status not 200"),console.error(e)),p(!1)})).catch((function(e){e.response?console.error("ERROR fetchSendData(), status: ".concat(e.response.status,", statusText: ").concat(e.response.statusText,", message: '").concat(e.response.data.message,"'")):console.error(e),p(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement("main",{className:a.layout},r.a.createElement(Fe.a,{className:a.paper},r.a.createElement(z.a,{component:"h1",variant:"h4",align:"center"},"Check-out"),r.a.createElement(Le.a,{activeStep:s,className:a.stepper},["Select project","Scan barcodes"].map((function(e){return r.a.createElement(Be.a,{key:e},r.a.createElement(Ae.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(Ke,{selectedProject:$,projects:Q,onProjectChange:te,isLoading:d});case 1:return r.a.createElement(Je,{data:W,isLoading:d,selectedProject:$,onDataChange:ae,onBarcodeSubmitted:ne});case 2:return r.a.createElement(Ue,{isLoading:d,allItemsSubmitted:F,failedSubmittedItems:K});default:return r.a.createElement(r.a.Fragment,null," Error: this step not found. ")}}(s),r.a.createElement("div",{className:a.buttons},function(e){var n=[];return 0!==e&&2!==e&&n.push(r.a.createElement(y.a,{key:"button_back",name:"button_back",onClick:oe,className:a.button},"Back")),1===e&&W.length>0&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_submit",key:"button_submit",color:"primary",onClick:ce,className:a.button},"Submit")),0===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_next",key:"button_next",color:"primary",onClick:re,className:a.button},"Next")),2===e&&n.push(r.a.createElement(y.a,{variant:"contained",name:"button_end",key:"button_end",color:"primary",onClick:function(){t("Home")},className:a.button},"End")),n}(s)),r.a.createElement(tt,{open:h,data:O,handleSnackbar:function(){E(!h)}}),r.a.createElement(at,{open:R,data:{title:"Are you sure you want to check-out the scanned vials from CDD?"},handleDialog:ce,handleYesDialog:se}))))))},gt=a(422),bt=a.n(gt),ft=Object(O.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240},backButton:{marginRight:e.spacing(2)},title:{flexGrow:1},hide:{display:"none"},drawerHeader:Object(W.a)(Object(W.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}}));function ht(e){var t=ft(),a=function(e){var t=r.a.useState(!0),a=Object(l.a)(t,2),n=a[0],o=a[1];return r.a.useEffect((function(){var t=M()(e);return t.on("idle",(function(){return o(!1)})),t.on("active",(function(){return o(!0)})),function(){return t.stop()}}),[]),n}({timeToIdle:18e5,inactivityEvents:[]}),o=Object(n.useState)(!1),c=Object(l.a)(o,2),s=c[0],i=c[1],u=Object(n.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(!1),b=Object(l.a)(g,2),h=b[0],E=b[1],v=Object(n.useState)(""),j=Object(l.a)(v,2),O=j[0],C=j[1],S=Object(n.useState)("Home"),x=Object(l.a)(S,2),R=x[0],D=x[1];Object(n.useEffect)((function(){window.addEventListener("beforeunload",(function(e){var t="true"===f.a.get("remember");e.preventDefault(),t||(f.a.remove("username"),f.a.remove("fullname"),f.a.remove("token"),f.a.remove("authentication"),f.a.remove("remember"))}))})),Object(n.useEffect)((function(){a||window.location.reload()}),[a]);var w=function(){p(!d)},N=function(){p(!1),["Add","Delete","Check-in","Check-out"].includes(O)?E(!0):E(!1),C(R),D(O)},T=function(e){["Add","Delete","Check-in","Check-out"].includes(e)?E(!0):E(!1),C(R),D(e)};return r.a.createElement("div",{className:t.root},r.a.createElement(k.a,null),r.a.createElement(Q.a,{position:"fixed",className:Object(Y.a)(t.appBar,Object(V.a)({},t.appBarShift,s))},r.a.createElement(U.a,null,r.a.createElement(Z.a,{edge:"start",className:t.backButton,color:"inherit","aria-label":"back drawer",onClick:function(){h?p(!0):N()}},r.a.createElement(ce.a,null)),r.a.createElement("img",{src:bt.a,width:150}),r.a.createElement(z.a,{variant:"h6",noWrap:!0,className:t.title}," "),r.a.createElement(Z.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:function(){i(!s)},disableRipple:!1},s?r.a.createElement(le.a,null):r.a.createElement(re.a,null)))),r.a.createElement("main",{className:Object(Y.a)(t.content,Object(V.a)({},t.contentShift,s))},r.a.createElement("div",{className:t.drawerHeader}),function(e){switch(e){case"Add":return r.a.createElement(st,{handleChangePage:T});case"Delete":return r.a.createElement(it,{handleChangePage:T});case"Check-in":return r.a.createElement(mt,{handleChangePage:T});case"Check-out":return r.a.createElement(pt,{handleChangePage:T});default:return r.a.createElement(Pe,{handleChangePage:T})}}(R)),r.a.createElement(Ee,{open:s}),r.a.createElement(X.a,{open:d,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement($.a,{id:"alert-dialog-title"},"Are you sure you want to go back?"),r.a.createElement(ee.a,null,r.a.createElement(te.a,{id:"alert-dialog-description"},"All scanned data will be deleted.")),r.a.createElement(ae.a,null,r.a.createElement(y.a,{onClick:N,color:"primary"},"Yes"),r.a.createElement(y.a,{onClick:w,color:"primary",autoFocus:!0},"No"))))}var Et=Object(d.a)({palette:{primary:{main:"#173D5C",light:"#476789",dark:"#001732"},secondary:{main:"#b71c1c",light:"#f05545",dark:"#7f0000"},error:{main:"#d32f2f",light:"#ff6659",dark:"#9a0007"},warning:{main:"#ffab00",light:"#ffdd4b",dark:"#c67c00"},success:{main:"#388e3c",light:"#6abf69",dark:"#00600f"}}});function vt(e){var t=e.auth,a=e.component,n=Object(s.a)(e,["auth","component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(u.a,{to:{pathname:"/login"}})}}))}function jt(e){var t=e.auth,a=e.component,n=Object(s.a)(e,["auth","component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return t?r.a.createElement(u.a,{to:{pathname:"/dashboard"}}):r.a.createElement(a,e)}}))}var Ot=function(){var e=r.a.useContext(g);return r.a.createElement(u.d,null,r.a.createElement(vt,{path:"/dashboard",exact:!0,auth:e.auth,component:ht}),r.a.createElement(jt,{path:"/login",exact:!0,auth:e.auth,component:H}),r.a.createElement(jt,{path:"/",auth:e.auth,component:H}))},yt=function(){var e=Object(m.a)("authentication",!1),t=Object(l.a)(e,3),a=t[0],n=t[1];return t[2],r.a.createElement(p.a,{theme:Et},r.a.createElement(g.Provider,{value:{auth:a,setAuth:n}},r.a.createElement(i.a,null,r.a.createElement(Ot,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(yt,null),document.getElementById("root"))}},[[434,1,2]]]);
//# sourceMappingURL=main.faadfc01.chunk.js.map